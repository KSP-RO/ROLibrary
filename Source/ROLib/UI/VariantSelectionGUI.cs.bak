using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using UnityEngine;

namespace ROLib
{
    public class VariantSelectionGUI
    {
        private static Rect windowRect = new Rect(Screen.width - 900, 40, 600, 500);
        private static int id = 1723;
        public static ModuleROTank roTank;
        private static ModelDefinitionLayoutOptions[] coreSet;
        private static ModelDefinitionLayoutOptions[] noseSet;
        private static ModelDefinitionLayoutOptions[] mountSet;

        public static void openGUI (ModuleROTank tank, ModelDefinitionLayoutOptions[] mdCore, ModelDefinitionLayoutOptions[] mdNose, ModelDefinitionLayoutOptions[] mdMount)
        {
            roTank = tank;
            int coreLen = mdCore.Length;
            int noseLen = mdNose.Length;
            int mountLen = mdMount.Length;
            List<ModelDefinitionLayoutOptions> coreDefs = new List<ModelDefinitionLayoutOptions>();
            List<ModelDefinitionLayoutOptions> noseDefs = new List<ModelDefinitionLayoutOptions>();
            List<ModelDefinitionLayoutOptions> mountDefs = new List<ModelDefinitionLayoutOptions>();

            foreach (ModelDefinitionLayoutOptions core in mdCore)
            {
                coreDefs.Add(core);
            }
            foreach (ModelDefinitionLayoutOptions nose in mdNose)
            {
                noseDefs.Add(nose);
            }
            foreach (ModelDefinitionLayoutOptions mount in mdMount)
            {
                mountDefs.Add(mount);
            }



            coreSet = coreDefs.ToArray();
            noseSet = noseDefs.ToArray();
            mountSet = mountDefs.ToArray();
        }

        public static void closeGUI()
        {
            roTank.closeVariantGUI();
            roTank = null;
            coreSet = null;
            noseSet = null;
            mountSet = null;
        }

        public static void updateGUI()
        {
            try
            {
                windowRect = GUI.Window(id, windowRect, addVariantWindow, "ROTanks Model Selections");
            }
            catch (Exception e)
            {
                MonoBehaviour.print("Caught exception while rendering Variant Selection GUI");
                MonoBehaviour.print(e.Message);
                MonoBehaviour.print(System.Environment.StackTrace);
            }
        }

        private static void addVariantWindow(int id)
        {
            GUILayout.BeginVertical();

            // Headers
            GUILayout.BeginHorizontal();
            GUILayout.Label("Core", GUILayout.Width(180));
            GUILayout.Label("Nose", GUILayout.Width(180));
            GUILayout.Label("Mount", GUILayout.Width(180));
            GUILayout.EndHorizontal();

            GUILayout.BeginHorizontal();
            addCoreSelections();
            //addNoseSelections();
            //addMountSelections();
            GUILayout.EndHorizontal();
        }

        private static void addCoreSelections()
        {
            int len = coreSet.Length;

            ROLLog.debug("coreSet: " + coreSet);

            GUILayout.BeginVertical();

        }
    }
}
